<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="imagetoolbar" content="no">
  <title>Authorization | DSTU 2 API</title>
  
  <link href="../../../css/reset.css" rel="stylesheet" type="text/css">
  <link href="../../../css/documentation.css" media="screen" rel="stylesheet" type="text/css">
  <link href="../../../css/pygments.css" media="screen" rel="stylesheet" type="text/css">
  <script src="../../../js/jquery.js"></script>
  <script src="../../../js/millennium_diff_table_config.js"></script>
  <script src="../../../js/millennium_diff_table.js"></script>
  <script src="../../../js/documentation.js" defer></script>
  <script src="../../../js/request_button.js"></script>
</head>


<body class="dstu2_api">
  <div id="header">

  <div id="top-header">
    <div class="header-wrapper">

      <a class="logo" href="https://code.cerner.com">Cerner Corporation</a>
      <a class="button" id="header-button" href="https://code-console.cerner.com/">code Console</a>

    </div>
<!-- /.header-wrapper -->
  </div>
<!-- /#top-header -->

  <div id="bottom-header">
    <div class="header-wrapper">

      <ul class="pages">
        <li><a href="../../../millennium/overview/">Millennium</a></li>
         <li><a href="../../overview/">Soarian</a></li>
        <li><a href="../../../authorization">Authorization</a></li>
        <li><a href="../../../smart">SMART</a></li>
      </ul>

    </div>
<!-- /.header-wrapper -->
  </div>
<!-- /#bottom-header -->

</div>
<!-- /#header -->


  <div class="sub-nav">
    
      <h2>Soarian</h2>
      <ul>
		<li><a href="../../overview/">Overview</a></li>
         <li><a href="../" class="active">DSTU 2 Final (1.0.2)</a></li>
        <li><a href="../../r4/">R4 First Normative Content (4.0.1)</a></li>
        <li><a href="https://forums.oracle.com/ords/apexds/domain/open-developer-experience">Forum</a></li>
      </ul>
    
  </div>

  <div id="wrapper">
    <div class="content">
      <h1 id="authorization">Authorization</h1>

<p>All API calls require secure authorization.  Secure authorization for all API call relies on the OAuth 2.0 standard. SMART on FHIR provides profiles of OAuth 2.0 for an authorization server to broker:</p>

<ul>
  <li>The exchange of an access token to an Application (aka API consumer) on behalf of an authenticated user. Per the Terms of Use of the Soarian API, such users may be patients or patient proxies.</li>
  <li>The exchange of contextual information, such as a selected patient, and the ability to constrain tokens to said context.</li>
</ul>

<p>In order to access data from Soarian via the API, an Application has to first acquire an access token from the API’s authorization server. For detailed information on OAuth 2.0 refer to <a href="../../../authorization" title="authorization-OAuth">Authorization</a></p>

<ul id="markdown-toc">
  <li><a href="#requesting-authorization-on-behalf-of-a-user" id="markdown-toc-requesting-authorization-on-behalf-of-a-user">Requesting Authorization on Behalf of a User</a></li>
  <li>
<a href="#activatelinktoken-api-to-link-user-identity-to-patient" id="markdown-toc-activatelinktoken-api-to-link-user-identity-to-patient">ActivateLinkToken API to link User Identity to Patient</a>    <ul>
      <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
      <li><a href="#details" id="markdown-toc-details">Details</a></li>
    </ul>
  </li>
</ul>

<h2 id="requesting-authorization-on-behalf-of-a-user">Requesting Authorization on Behalf of a User</h2>

<p>To access Cerner’s FHIR<sup>®</sup> services on behalf of a user, your client Application must make an authorization request through a user agent on the user’s device. This involves the following steps:</p>

<ul>
  <li>Discover the authorization and token endpoints from the <a href="../conformance" title="conformance">Conformance</a> resource.</li>
  <li>Construct an authorization grant request URL.</li>
  <li>Invoke a browser with the authorization grant request URL.</li>
  <li>Receive the OAuth callback.</li>
  <li>Exchange the received grant for a token.</li>
  <li>Close the browser.</li>
  <li>Handle any exceptions encountered.</li>
  <li>Utilize “refresh” tokens.</li>
</ul>

<p>For details on above steps refer to <a href="../../../authorization/#requesting-authorization-on-behalf-of-a-user" title="authorization-behalf-user">Authorization</a></p>

<p>Soarian supports only SMART Application Launch flow as listed in the <a href="../../../authorization/authorization-specification/#smart-application-launch-flow" title="smart-application">technical specification</a></p>

<p>Soarian supports only access on behalf of a patient or patient proxy. In addition, Soarian supports only “patient” scopes for the resources specified in the Conformance statement. For example: patient/Condition.read, patient/MedicationStatement.read…</p>

<h2 id="activatelinktoken-api-to-link-user-identity-to-patient">ActivateLinkToken API to link User Identity to Patient</h2>

<h3 id="overview">Overview</h3>

<p>Soarian Clinicals generates and provides Activation tokens for each of the patients and/or patient’s proxies who wish to request patient’s data. The Application needs to provide a means to enter Activation tokens and call the ActivateLinkToken API to link the user to the patient record.</p>

<p>Activation tokens can be provided to patients and their proxies. Soarian Clinicals allows hospital staff to add patient proxies and manage their tokens. This Activation token is provided to patient and/or their proxies by hospital staff either by printed report or email, based on hospital’s configuration and policy.  Activation tokens are temporary and expire if not utilized; the API will error if a token is invalid, revoked or expired.  Patients can request hospital staff to generate another Activation token, if needed.</p>

<p>API-consuming Application(s) need to invoke ActivateLinkToken API to establish a link between the established user identity and a patient record in Soarian Clinicals. This service when called, the Application must provide Authorization token (access token received from Cerner OAuth server), valid Activation token (provided by Hospital to Patient or Proxy) and Patient’s Date of Birth. Activation is once per account (patient/proxy), regardless of the number of different applications used to access the patient record.</p>

<h3 id="details">Details</h3>
<p>The following provides information about the ActivateLinkToken API.</p>

<h4 id="api-root-url">API Root Url</h4>

<p>The root URL for this API would be as follows, where the tenant varies and is provided at the time of registration.</p>

<p>Sandbox: <code>https://api-myrecord.sandboxcerner.com/soarian/:tenant</code></p>

<p>Production: <code>https://api-myrecord.cerner.com/soarian/:tenant</code></p>

<h4 id="requesting-oauth-access-token">Requesting OAuth Access Token</h4>

<p>ActivateLinkToken API requires OAuth access token from Cerner OAuth authorization server. Cerner has designed a special profile to access this API.  Each Soarian Clinicals instance advertises the URL of its respective authorization server within its FHIR<sup>®</sup> <a href="../conformance" title="conformance">Conformance</a> document for the ActivateLinkToken API under</p>

<pre><code>"rest": [
{
  "mode": "server",
  "security": {
    "extension": [ ...
        ]
      },
      {
        "url": "http://cerner.hs.fhir.com/StructureDefinition/SoarianIdLinking-uris",
        "extension": [
          {
            "url": "token",
            "valueUri": "https://authorization.sandboxcerner.com/tenants/45343c0c-3f93-4721-874a-258fc4bae3a4/protocols/oauth2/profiles/soarian-identity-linking-v1/token"
          },
          {
            "url": "authorize",
            "valueUri": "https://authorization.sandboxcerner.com/tenants/45343c0c-3f93-4721-874a-258fc4bae3a4/protocols/oauth2/profiles/soarian-identity-linking-v1/personas/patient/authorize"
          }
        ]
      }
    ],
    "description": "OAuth2 with SMART extensions"
  },
</code></pre>

<p>The Application needs to initiate the OAuth flow with the end-points listed above for obtaining OAuth 2.0 token for ActivateLinkToken API. Refer to <a href="../../../authorization/#requesting-authorization-on-behalf-of-a-user" title="authorization">Authorization</a> for more details. The scope is not applicable to this API and will be passed empty.</p>

<h4 id="headers">Headers</h4>
<p>The following headers must be provided.</p>

<pre><code>Authorization: &lt;OAuth2 Bearer Token obtained from above step&gt;
</code></pre>

<h4 id="parameters">Parameters</h4>
<p>There are two input parameters and both are mandatory.</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Required?</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>linkToken</td>
      <td>Y</td>
      <td>Carries activation token provided to patient or proxy by hospitals. This value is UTF8 (STRING).</td>
    </tr>
    <tr>
      <td>dateOfBirth</td>
      <td>Y</td>
      <td>Carries date of birth of patient. This value is a UTF8 (STRING), structured as a full-date as specified in (RFC3339 section 5.6).</td>
    </tr>
  </tbody>
</table>

<h4 id="request">Request</h4>

<pre><code>POST /ActivateLinkToken?:parameters
</code></pre>

<h4 id="response">Response</h4>
<p>Http status code</p>

<table>
  <thead>
    <tr>
      <th>Http Status Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>200</td>
      <td>Success</td>
    </tr>
    <tr>
      <td>403</td>
      <td>JSON response to carry exception description. Ex. Access token is not match with specification.</td>
    </tr>
    <tr>
      <td>404</td>
      <td>JSON response to carry description. Ex. Activation token does not exist in Soarian Clinicals.</td>
    </tr>
    <tr>
      <td>500</td>
      <td>JSON response with any server internal error.</td>
    </tr>
  </tbody>
</table>


    </div>

    <div id="js-sidebar" class="sidebar-shell">
  <div class="expand-collapse">
    <a href="#" class="js-expand-all">+ Expand All</a>
    <a href="#" class="js-collapse-all hide">- Collapse All</a>
  </div>
  <div class="js-toggle-list sidebar-module expandable">
    <ul>
      <li class="js-topic">
        <h3>
<a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="../">Overview</a>
</h3>
        <ul class="js-guides">
          <li><a href="./">Authorization</a></li>
          <li><a href="../conformance/">Conformance Metadata</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3>
<a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="../care-provision/">Care Provision</a>
</h3>
        <ul class="js-guides">
          <li><a href="../care-provision/careplan/">CarePlan</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3>
<a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="../general-clinical/">General Clinical</a>
</h3>
        <ul class="js-guides">
          <li><a href="../general-clinical/allergy-intolerance/">AllergyIntolerance</a></li>
          <li><a href="../general-clinical/condition/">Condition</a></li>
          <li><a href="../general-clinical/procedure/">Procedure</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3>
<a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="../diagnostic/">Diagnostic</a>
</h3>
        <ul class="js-guides">
          <li><a href="../diagnostic/diagnostic-report/">DiagnosticReport</a></li>
          <li><a href="../diagnostic/observation/">Observation</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3>
<a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="../devices/">Devices</a>
</h3>
        <ul class="js-guides">
          <li><a href="../devices/device/">Device</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3>
<a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="../infrastructure/">Infrastructure</a>
</h3>
        <ul class="js-guides">
          <li><a href="../infrastructure/document-reference/">DocumentReference</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3>
<a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="../individuals/">Individuals</a>
</h3>
        <ul class="js-guides">
          <li><a href="../individuals/patient/">Patient</a></li>
        </ul>
      </li>
      <li class="js-topic">
        <h3>
<a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="../medications/">Medications</a>
</h3>
        <ul class="js-guides">
          <li><a href="../medications/immunization/">Immunization</a></li>
          <li><a href="../medications/medication-statement/">MedicationStatement</a></li>
        </ul>
      </li>
    </ul>
  </div> <!-- /sidebar-module -->
  <div class="sidebar-module notice">
    <p>This website is a <a href="https://github.com/cerner/fhir.cerner.com" target="_blank">public GitHub repository</a>. Please help us by forking the project and adding to it.</p>
  </div>
</div>
<!-- /sidebar-shell -->

  </div>
<!-- #wrapper -->

  <div id="footer">

  <div id="top-footer">
    <div class="footer-wrapper">

      <ul id="footer-pages">
        <li><a target="_blank" href="https://forums.oracle.com/ords/apexds/domain/open-developer-experience">Forum</a></li>
        <li><a target="_blank" href="https://engineering.cerner.com/">Blog</a></li>
        <li><a target="_blank" href="https://www.cerner.com/about">About</a></li>
      </ul>

      <ul id="social-links">
        <li><a target="_blank" href="https://www.linkedin.com/showcase/oraclehealth/" class="linkedin">LinkedIn</a></li>
        <li><a target="_blank" href="https://twitter.com/oraclehealth" class="twitter">Twitter</a></li>
        <li><a target="_blank" href="https://www.facebook.com/OracleHealth/" class="facebook">Facebook</a></li>
        <li><a target="_blank" href="https://www.instagram.com/oraclehealth/" class="instagram">Instagram</a></li>
      </ul>

    </div>
<!-- /.footer-wrapper -->
  </div>
<!-- /#top-footer -->

  <div id="bottom-footer">
    <div class="footer-wrapper">

      <p>© <span class="js-year"></span>, Oracle</p>

      <ul id="footer-legal">
        <li><a target="_blank" href="http://www.cerner.com/Terms_Of_Use/">Terms of Use</a></li>
        <li><a target="_blank" href="http://www.cerner.com/Privacy/">Privacy Policy</a></li>
        <li><a target="_blank" href="http://www.cerner.com/GlobalPrivacy/">Safe Harbor Guidelines</a></li>
      </ul>

    </div>
<!-- /.footer-wrapper -->
  </div>
<!-- /#bottom-footer -->

</div>
<!-- /#footer -->

</body>
</html>
